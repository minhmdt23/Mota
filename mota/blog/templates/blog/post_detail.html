{% extends 'blog/base.html' %}

{% block content %}
	<style>
		@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;450&display=swap');
		body{
			background-color: rgb(246 244 236)
		}

		#btn-back-to-top {
		  	position: fixed;
		  	bottom: 70px;
		  	right: 20px;
		  	display: none;
		  	background-color: #f9f9f979;
		}
		.form-outline .form-control:focus~.form-notch .form-notch-leading {
		    border-color: #000000;
		    box-shadow: -1px 0 0 0 #000000, 0 1px 0 0 #000000, 0 -1px 0 0 #000000;
		}
		.form-outline .form-control:focus~.form-label {
		    color: #000000;
		}
		.form-outline .form-control:focus~.form-notch .form-notch-middle {
		    border-color: #000000;
		    box-shadow: 0 1px 0 0 #000000;
		    border-top: 1px solid transparent;
		}
		.form-outline .form-control:focus~.form-notch .form-notch-trailing {
		    border-color: #000000;
		    box-shadow: 1px 0 0 0 #000000, 0 -1px 0 0 #000000, 0 1px 0 0 #000000;
		}
		.form-control:focus {
		    box-shadow: none;
		    transition: all .1s linear;
		    border-color: #000000;
		    box-shadow: inset 0 0 0 1px #000000;
		}
	</style>

	<div class="container mt-3">
		<div style="font-family: 'Roboto Mono', monospace; font-weight: 150; font-size: 17px;">
			<div class="text-center">
				<h1 class="font-weight-bold mb-3">{{ post.title }}</h1>
			</div>
			{{ post.content | safe}}
		</div>
	</div>

	<!-- Back to top button -->
	<button type="button" class="btn btn-light btn-floating btn-lg" id="btn-back-to-top">
	  	<i class="fas fa-arrow-up"></i>
	</button>


	
		<section class="gradient-custom">
			<div class="container my-5 py-5">
			    <div class="row d-flex justify-content-center">
				    <div class="col-md-12 col-lg-10 col-xl-8">
				        <div id="show_comment" class="card">
					        <div class="card-body p-4">
					          	<!-- TITLE COMMENT -->
					            <h4 class="text-center mb-4 pb-2">Bình luận</h4>
					            <!-- TITLE COMMENT -->
					            {% if user.is_authenticated %}
									<div id="display_cmt">
										<center>
											<div class="spinner-grow loader-comment" role="status">
											  <span class="visually-hidden">Loading...</span>
											</div>
										</center>
									</div><!-- COMMENT XUẤT HIỆN TẠI ĐÂY BẰNG AJAX -->
								{% else %}
									<div class="alert alert-dark text-center" role="alert">
									  Bạn cần <a href="{% url 'login' %}" class="alert-link">Đăng nhập</a> để sử dụng tính năng này.
									</div>
								{% endif %}
					        </div>
				        </div>
				    </div>
			    </div>
			</div>
		</section>
	

	
	<script type="text/javascript">
		$(document).ready(function() {
		  $("#display_cmt").load($(".loader-comment").fadeOut());
		});
	</script>

	<script type="text/javascript">
		// LOAD COMMENT KHI TẢI TRANG
		$(document).ready(function(){
			$.ajax({
				type: 'GET',
				url: "{% url 'get_comment' post.id %}",
				success: function(response){
					$("#display_cmt").empty();
					$("#display_cmt").html(response);
				},
				error: function(response){
					alert("An Error Occured")
				}
			});
		});
	</script>



	<script type="text/javascript">
		//Get the button
		let mybutton = document.getElementById("btn-back-to-top");

		// When the user scrolls down 20px from the top of the document, show the button
		window.onscroll = function () {
		  scrollFunction();
		};

		function scrollFunction() {
		  if (
		    document.body.scrollTop > 20 ||
		    document.documentElement.scrollTop > 20
		  ) {
		    mybutton.style.display = "block";
		  } else {
		    mybutton.style.display = "none";
		  }
		}
		// When the user clicks on the button, scroll to the top of the document
		mybutton.addEventListener("click", backToTop);

		function backToTop() {
		  document.body.scrollTop = 0;
		  document.documentElement.scrollTop = 0;
		}
	</script>
{% endblock %}
